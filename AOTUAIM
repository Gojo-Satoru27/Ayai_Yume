-- D·ªãch v·ª• Roblox
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

-- Bi·∫øn ch√≠nh
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local AutoAimEnabled = false

-- T·∫°o GUI ch√≠nh
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = LocalPlayer:FindFirstChildOfClass("PlayerGui")

-- üìå Th√¥ng b√°o khi b·∫≠t script
local NotificationFrame = Instance.new("Frame", ScreenGui)
NotificationFrame.Size = UDim2.new(0, 400, 0, 100)
NotificationFrame.Position = UDim2.new(0.5, -200, 0.2, 0)
NotificationFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
NotificationFrame.BorderSizePixel = 2
NotificationFrame.BorderColor3 = Color3.fromRGB(255, 255, 255)

-- N·ªôi dung th√¥ng b√°o
local NotificationLabel = Instance.new("TextLabel", NotificationFrame)
NotificationLabel.Size = UDim2.new(1, 0, 1, 0)
NotificationLabel.Position = UDim2.new(0, 0, 0, 0)
NotificationLabel.Text = "Script ƒë∆∞·ª£c t·∫°o b·ªüi Thong"
NotificationLabel.TextScaled = true
NotificationLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
NotificationLabel.Font = Enum.Font.SourceSansBold
NotificationLabel.BackgroundTransparency = 1

-- ·∫®n th√¥ng b√°o sau 10 gi√¢y
spawn(function()
    wait(10)
    NotificationFrame:Destroy()
end)

-- üìå N√∫t b·∫≠t/t·∫Øt Auto Aim v·ªõi ·∫£nh ƒë·∫°i di·ªán l√†m n·ªÅn
local StatusFrame = Instance.new("TextButton", ScreenGui)
StatusFrame.Size = UDim2.new(0, 200, 0, 50)
StatusFrame.Position = UDim2.new(0.5, -100, 0.05, 0)
StatusFrame.BorderSizePixel = 2
StatusFrame.BorderColor3 = Color3.fromRGB(255, 255, 255)
StatusFrame.TextScaled = true
StatusFrame.Font = Enum.Font.SourceSansBold
StatusFrame.TextColor3 = Color3.fromRGB(255, 0, 0) -- M·∫∑c ƒë·ªãnh l√† ƒë·ªè (OFF)
StatusFrame.Text = "Auto Aim OFF"

-- ƒê·∫∑t ·∫£nh ƒë·∫°i di·ªán l√†m n·ªÅn cho n√∫t
local userId = 111982589088426
local thumbType = Enum.ThumbnailType.HeadShot
local thumbSize = Enum.ThumbnailSize.Size150x150
local content, isReady = Players:GetUserThumbnailAsync(userId, thumbType, thumbSize)

if isReady then
    local imageLabel = Instance.new("ImageLabel")
    imageLabel.Size = UDim2.new(1, 0, 1, 0)
    imageLabel.Image = content
    imageLabel.Parent = StatusFrame
    imageLabel.ZIndex = 0
    StatusFrame.Text = "Auto Aim OFF"
    StatusFrame.TextColor3 = Color3.fromRGB(255, 0, 0) -- ƒê·ªè khi t·∫Øt
    StatusFrame.ZIndex = 1
else
    -- N·∫øu kh√¥ng l·∫•y ƒë∆∞·ª£c ·∫£nh ƒë·∫°i di·ªán, ƒë·∫∑t m√†u n·ªÅn m·∫∑c ƒë·ªãnh
    StatusFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
end

-- üìå Chuy·ªÉn ƒë·ªïi Auto Aim khi nh·∫•n v√†o n√∫t
StatusFrame.MouseButton1Click:Connect(function()
    AutoAimEnabled = not AutoAimEnabled
    if AutoAimEnabled then
        StatusFrame.Text = "Auto Aim ON"
        StatusFrame.TextColor3 = Color3.fromRGB(0, 255, 0) -- Xanh khi b·∫≠t
    else
        StatusFrame.Text = "Auto Aim OFF"
        StatusFrame.TextColor3 = Color3.fromRGB(255, 0, 0) -- ƒê·ªè khi t·∫Øt
    end
end)

-- üìå B·∫£ng kho·∫£ng c√°ch tr√™n ƒë·∫ßu ng∆∞·ªùi ch∆°i
local DistanceLabels = {}

function updateDistanceLabels()
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local pos = player.Character.HumanoidRootPart.Position
            local distance = (LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") and 
                (LocalPlayer.Character.HumanoidRootPart.Position - pos).magnitude) or math.huge
            
            if distance < 500 then
                -- T·∫°o label n·∫øu ch∆∞a c√≥
                if not DistanceLabels[player] then
                    local label = Instance.new("BillboardGui", player.Character.HumanoidRootPart)
                    label.Size = UDim2.new(0, 100, 0, 50)
                    label.StudsOffset = Vector3.new(0, 3, 0) -- Hi·ªÉn th·ªã tr√™n ƒë·∫ßu
                    label.AlwaysOnTop = true
                    
                    local text = Instance.new("TextLabel", label)
                    text.Size = UDim2.new(1, 0, 1, 0)
                    text.BackgroundTransparency = 1
                    text.TextScaled = true
                    text.Font = Enum.Font.SourceSansBold
                    text.TextColor3 = Color3.fromRGB(255, 255, 0) -- M√†u v√†ng

                    DistanceLabels[player] = text
                end
                
                -- C·∫≠p nh·∫≠t kho·∫£ng c√°ch
                DistanceLabels[player].Text = math.floor(distance) .. "m"
            else
                -- X√≥a label n·∫øu ngo√†i ph·∫°m vi
                if DistanceLabels[player] then
                    DistanceLabels[player]:Destroy()
                    DistanceLabels[player] = nil
                end
            end
        end
    end
end

-- C·∫≠p nh·∫≠t kho·∫£ng c√°ch m·ªói gi√¢y
spawn(function()
    while true do
        if AutoAimEnabled then
            updateDistanceLabels()
        else
            -- X√≥a t·∫•t c·∫£ label khi Auto Aim t·∫Øt
            for player, label in pairs(DistanceLabels) do
                if label then
                    label:Destroy()
                end
            end
            DistanceLabels = {}
        end
        wait(1)
    end
end)

-- üìå Auto Aim (Nh·∫Øm v√†o ng∆∞·ªùi g·∫ßn nh·∫•t)
RunService.RenderStepped:Connect(function()
    if AutoAimEnabled then
        local closestPlayer = nil
        local shortestDistance = math.huge

        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                local pos = player.Character.HumanoidRootPart.Position
                local distance = (LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") and 
                    (LocalPlayer.Character.HumanoidRootPart.Position - pos).magnitude) or math.huge

                if distance < shortestDistance then
                    closestPlayer = player
                    shortestDistance = distance
                end
            end
        end

        if closestPlayer and closestPlayer.Character and closestPlayer.Character:FindFirstChild("HumanoidRootPart") then
            local screenPoint, onScreen = Camera:WorldToViewportPoint(closestPlayer.Character.HumanoidRootPart.Position)
            if onScreen then
                mousemoverel((screenPoint.X - Camera.ViewportSize.X / 2) * 0.1, (screenPoint.Y - Camera.ViewportSize.Y / 2) * 0.1)
            end
        end
    end
end)
